var F=Object.defineProperty;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(t,e,a)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))U.call(e,a)&&C(t,a,e[a]);if(k)for(var a of k(e))z.call(e,a)&&C(t,a,e[a]);return t};import{a as h}from"./index.2885cb15.js";import{G as P,o as r,e as d,i as s,H as c,J as u,n as x,l as D,p as w,q as j,L as N,F as $,M as B,j as V,m as I,O as S,t as m,T as J}from"./vendor.b08dc4ec.js";import{_ as T}from"./index.86c095c3.js";import{T as M}from"./TwButton.c3ff6f91.js";const K={name:"CustomerForm",props:{update:{type:Function},customerProp:{type:Object,default:{id:0,name:"",street:"",city:"",phone:"",cell:"",zip:""}}},data(){return{customer:f({},this.$props.customerProp)}},methods:{async formSubmit(t){const e=this;t.preventDefault(),e.customer.id>0?await e.updateCustomer(e.customer,e.customer.id):await e.insertCustomer(e.customer)},async insertCustomer(t){const e=this,a=f({},t);delete a.id,await h.post("/api/customers/",JSON.stringify(a),{headers:{accept:"application/json","Content-Type":"application/json"}}).then(o=>{e.$emit("update",o.data,0)})},async updateCustomer(t,e){const a=this,o=f({},t);delete o.id,await h.put(`/api/customers/${e}/`,JSON.stringify(o),{headers:{accept:"application/json","Content-Type":"application/json"}}).then(n=>{a.$emit("update",n.data,e)})}},computed:{enableSubmit(){return this.nameValid||this.streetValid||this.cityValid||this.phoneValid},nameValid(){return this.customer.name.trim().length===0},streetValid(){return this.customer.street.trim().length===0},cityValid(){return this.customer.city.trim().length===0},phoneValid(){return this.customer.phone.trim().length===0}},directives:{focus:{mounted(t){setTimeout(()=>{t.focus()},100)}}}},p=t=>(w("data-v-3861b765"),t=t(),j(),t),L={class:"flex flex-col md:flex-row gap-x-4"},A={for:"sup-name",class:"flex-label"},q=p(()=>s("span",{class:"flex-span"},"Nama:",-1)),E={class:"flex flex-col md:flex-row gap-x-4"},G={for:"street",class:"flex-label"},H=p(()=>s("span",{class:"flex-span"},"Alamat:",-1)),R={for:"city",class:"flex-label"},Q=p(()=>s("span",{class:"flex-span"},"Kota:",-1)),W={class:"flex flex-col md:flex-row gap-x-4"},X={for:"phone",class:"flex-label"},Y=p(()=>s("span",{class:"flex-span"},"Telp.:",-1)),Z={for:"cellular",class:"flex-label"},ee=p(()=>s("span",{class:"flex-span"},"Cellular:",-1)),te={class:"flex flex-col md:flex-row gap-x-4"},se={for:"zip",class:"flex-label"},ae=p(()=>s("span",{class:"flex-span"},"Kode pos:",-1)),le={for:"email",class:"flex-label"},ne=p(()=>s("span",{class:"flex-span"},"e-mail:",-1)),oe={class:"flex flex-row gap-2 mt-5"},ie=["disabled"];function re(t,e,a,o,n,i){const b=P("focus");return r(),d("div",null,[s("form",{onSubmit:e[7]||(e[7]=(...l)=>i.formSubmit&&i.formSubmit(...l))},[s("div",L,[s("label",A,[q,c(s("input",{maxlength:"50",id:"sup-name",type:"text",class:x(["flex-input",{"input-disable":i.nameValid}]),"onUpdate:modelValue":e[0]||(e[0]=l=>n.customer.name=l),placeholder:"e.g. PT. Mandiri Perkasa"},null,2),[[b],[u,n.customer.name]])])]),s("div",E,[s("label",G,[H,c(s("textarea",{id:"street",maxlength:"128",class:x(["flex-input",{"input-disable":i.streetValid}]),"onUpdate:modelValue":e[1]||(e[1]=l=>n.customer.street=l),placeholder:"e.g. Jl. Jenderal Sudirman No. 155 Kel. Lemahmekar"},null,2),[[u,n.customer.street]])]),s("label",R,[Q,c(s("input",{id:"city",maxlength:"50",class:x(["flex-input self-start",{"input-disable":i.cityValid}]),type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>n.customer.city=l),placeholder:"e.g. Indramayu"},null,2),[[u,n.customer.city]])])]),s("div",W,[s("label",X,[Y,c(s("input",{id:"phone",maxlength:"25",class:x(["flex-input",{"input-disable":i.phoneValid}]),type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>n.customer.phone=l),placeholder:"e.g. 02342775"},null,2),[[u,n.customer.phone]])]),s("label",Z,[ee,c(s("input",{id:"cellular",maxlength:"25",class:"flex-input",type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>n.customer.cell=l),placeholder:"e.g. 0856 6598 2366"},null,512),[[u,n.customer.cell]])])]),s("div",te,[s("label",se,[ae,c(s("input",{id:"zip",maxlength:"8",class:"flex-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>n.customer.zip=l),placeholder:"e.g. 45212"},null,512),[[u,n.customer.zip]])]),s("label",le,[ne,c(s("input",{id:"email",maxlength:"128",class:"flex-input",type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>n.customer.email=l),placeholder:"e.g. somepne@gmail.com"},null,512),[[u,n.customer.email]])])]),s("div",oe,[s("button",{type:"submit",class:"btn-primary",disabled:i.enableSubmit},"Save",8,ie),D(t.$slots,"default",{},void 0,!0)])],32)])}var O=T(K,[["render",re],["__scopeId","data-v-3861b765"]]);Array.prototype.indexOfObject=function(t,e){for(let a=0,o=this.length;a<o;a++)if(this[a][t]===e)return a;return-1};const y={id:0,name:"",street:"",city:"",phone:"",cell:"",zip:"",email:""},de={name:"Customer",data(){return{customers:[f({},y)],selectedIndex:-1,selectedId:-1}},components:{"tw-button":N(M),"customer-form":O},methods:{cancelForm(){const t=this;t.selectedId=-1,t.selectedIndex=-1},async removeCustomer(){const t=this,e={"Content-Type":"application/json"};await h.delete(`/api/customers/${t.selectedId}`,{headers:e}).then(a=>{if(a.status===200){const o=t.customers.indexOfObject("id",t.selectedId);t.customers.splice(o,1),t.cancelForm()}})},supClick(t,e){const a=this;a.selectedId=e,a.selectedIndex=t},updateCustomer(t,e){const a=this;let o=a.customers;const n=a.customers.indexOfObject("id",e);o[n]=t,a.customers=o,e===0&&a.customers.push(y),a.cancelForm()}},async mounted(){const t=this,e={"Content-Type":"application/json"};await h.get("/api/customers/",{headers:e}).then(a=>{const o=a.data;t.customers=[...o,y]})},directives:{focus:{mounted(t){setTimeout(()=>{t.focus()},100)}}}},_=t=>(w("data-v-2a5aac89"),t=t(),j(),t),ce=_(()=>s("h1",null,"Customer",-1)),ue=_(()=>s("div",{class:"message"}," Secara umum, arti customer adalah seseorang atau organisasi yang membeli suatu barang atau jasa dari sebuah toko atau bisnis tertentu. Pendapat lain mengatakan pengertian customer adalah pelanggan, yaitu individu, rumah tangga, atau perusahaan, yang membeli suatu produk, baik itu ide, barang, atau jasa, dari penjual atau pemasok tertentu. ",-1)),me=_(()=>s("div",{class:"message"}," Dalam hal ini, customer tidak selalu berarti konsumen karena bisa saja pelanggan tersebut membeli suatu produk bukan untuk digunakan sendiri tapi untuk dijual atau diberikan kepada orang lain. ",-1)),pe={class:"mt-4"},fe=_(()=>s("hr",null,null,-1)),_e={key:0,class:"customer-list"},he=_(()=>s("span",{class:"flex-1"},null,-1)),xe=["disabled"],be={key:1,class:"customer-list"},ge=["onClick"],ve={key:1,class:"customer-item",href:"#"},ye={class:"flex-none w-full md:w-2/5"},ke=["onClick"],Ce={class:"flex-1 w-full text-sm mt-2 md:mt-0"};function we(t,e,a,o,n,i){const b=O;return r(),d("div",null,[ce,ue,me,s("div",pe,[fe,(r(!0),d($,null,B(n.customers,(l,g)=>(r(),d("div",{key:l.id},[V(J,{name:"slide-fade"},{default:I(()=>[n.selectedIndex===g&&n.selectedId===l.id?(r(),d("div",_e,[V(b,{customerProp:l,onUpdate:i.updateCustomer},{default:I(()=>[s("button",{type:"button",class:"btn-cancel rounded-md",onClick:e[0]||(e[0]=v=>i.cancelForm())}," Cancel "),he,s("button",{onClick:e[1]||(e[1]=v=>i.removeCustomer()),type:"button",class:"btn-remove",disabled:l.id===0}," Delete ",8,xe)]),_:2},1032,["customerProp","onUpdate"])])):(r(),d("div",be,[l.id===0?(r(),d("a",{key:0,href:"#",onClick:S(v=>i.supClick(g,l.id),["prevent"]),class:"span-link"}," + ",8,ge)):(r(),d("div",ve,[s("div",ye,[s("a",{href:"#",onClick:S(v=>i.supClick(g,l.id),["prevent"]),class:"span-link"},m(l.name),9,ke)]),s("div",Ce,[s("div",null,m(l.street)+" - "+m(l.city)+", "+m(l.zip),1),s("div",null,"Telp. "+m(l.phone)+" / "+m(l.cell),1),s("div",null,m(l.email),1)])]))]))]),_:2},1024)]))),128))])])}var Oe=T(de,[["render",we],["__scopeId","data-v-2a5aac89"]]);export{Oe as default};
