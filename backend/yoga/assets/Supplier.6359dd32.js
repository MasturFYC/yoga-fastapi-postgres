var F=Object.defineProperty;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var S=(s,e,t)=>e in s?F(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))U.call(e,t)&&S(s,t,e[t]);if(k)for(var t of k(e))O.call(e,t)&&S(s,t,e[t]);return s};import{a as h}from"./index.2885cb15.js";import{G as z,o,e as r,j as l,H as d,J as u,n as _,m as D,q as V,s as w,R as J,F as N,O as P,k as j,p as C,t as c,T as B}from"./vendor.d21eb4bc.js";import{_ as I}from"./index.38b9c37f.js";import{T as M}from"./TwButton.6252f860.js";const K={name:"SupplierForm",props:{update:{type:Function},supplierProp:{type:Object,default:{id:0,name:"",sales_name:"",street:"",city:"",phone:"",cell:"",zip:""}}},data(){return{supplier:f({},this.$props.supplierProp)}},methods:{async formSubmit(s){const e=this;s.preventDefault(),e.supplier.id>0?await e.updateSupplier(e.supplier,e.supplier.id):await e.insertSupplier(e.supplier)},async insertSupplier(s){const e=this,t=f({},s);delete t.id,await h.post("/api/suppliers/",JSON.stringify(t),{headers:{accept:"application/json","Content-Type":"application/json"}}).then(n=>{e.$emit("update",n.data,0)})},async updateSupplier(s,e){const t=this,n=f({},s);delete n.id,await h.put(`/api/suppliers/${e}/`,JSON.stringify(n),{headers:{accept:"application/json","Content-Type":"application/json"}}).then(i=>{t.$emit("update",i.data,e)})}},computed:{enableSubmit(){return this.nameValid||this.salesValid||this.streetValid||this.cityValid||this.phoneValid},nameValid(){return this.supplier.name.trim().length===0},salesValid(){return this.supplier.sales_name.trim().length===0},streetValid(){return this.supplier.street.trim().length===0},cityValid(){return this.supplier.city.trim().length===0},phoneValid(){return this.supplier.phone.trim().length===0}},directives:{focus:{mounted(s){setTimeout(()=>{s.focus()},100)}}}},m=s=>(V("data-v-7244d7a0"),s=s(),w(),s),R={class:"flex flex-col md:flex-row gap-x-4"},A={for:"sup-name",class:"flex-label"},L=m(()=>l("span",{class:"flex-span"},"Nama:",-1)),$={for:"sales-name",class:"flex-label"},q=m(()=>l("span",{class:"flex-span"},"Sales:",-1)),E={class:"flex flex-col md:flex-row gap-x-4"},G={for:"street",class:"flex-label"},H=m(()=>l("span",{class:"flex-span"},"Alamat:",-1)),Q={for:"city",class:"flex-label"},W=m(()=>l("span",{class:"flex-span"},"Kota:",-1)),X={class:"flex flex-col md:flex-row gap-x-4"},Y={for:"phone",class:"flex-label"},Z=m(()=>l("span",{class:"flex-span"},"Telp.:",-1)),ee={for:"cellular",class:"flex-label"},se=m(()=>l("span",{class:"flex-span"},"Cellular:",-1)),le={class:"flex flex-col md:flex-row gap-x-4"},te={for:"zip",class:"flex-label"},ae=m(()=>l("span",{class:"flex-span"},"Kode pos:",-1)),ie={for:"email",class:"flex-label"},ne=m(()=>l("span",{class:"flex-span"},"e-mail:",-1)),pe={class:"flex flex-row gap-2 mt-5"},oe=["disabled"];function re(s,e,t,n,i,p){const b=z("focus");return o(),r("div",null,[l("form",{onSubmit:e[8]||(e[8]=(...a)=>p.formSubmit&&p.formSubmit(...a))},[l("div",R,[l("label",A,[L,d(l("input",{maxlength:"50",id:"sup-name",type:"text",class:_(["flex-input",{"input-disable":p.nameValid}]),"onUpdate:modelValue":e[0]||(e[0]=a=>i.supplier.name=a),placeholder:"e.g. PT. Mandiri Perkasa"},null,2),[[b],[u,i.supplier.name]])]),l("label",$,[q,d(l("input",{id:"sales-name",type:"text",maxlength:"50",class:_(["flex-input",{"input-disable":p.salesValid}]),"onUpdate:modelValue":e[1]||(e[1]=a=>i.supplier.sales_name=a),placeholder:"e.g. Mr. Junaedi"},null,2),[[u,i.supplier.sales_name]])])]),l("div",E,[l("label",G,[H,d(l("textarea",{id:"street",maxlength:"128",class:_(["flex-input",{"input-disable":p.streetValid}]),"onUpdate:modelValue":e[2]||(e[2]=a=>i.supplier.street=a),placeholder:"e.g. Jl. Jenderal Sudirman No. 155 Kel. Lemahmekar"},null,2),[[u,i.supplier.street]])]),l("label",Q,[W,d(l("input",{id:"city",maxlength:"50",class:_(["flex-input self-start",{"input-disable":p.cityValid}]),type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.supplier.city=a),placeholder:"e.g. Indramayu"},null,2),[[u,i.supplier.city]])])]),l("div",X,[l("label",Y,[Z,d(l("input",{id:"phone",maxlength:"25",class:_(["flex-input",{"input-disable":p.phoneValid}]),type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>i.supplier.phone=a),placeholder:"e.g. 02342775"},null,2),[[u,i.supplier.phone]])]),l("label",ee,[se,d(l("input",{id:"cellular",maxlength:"25",class:"flex-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>i.supplier.cell=a),placeholder:"e.g. 0856 6598 2366"},null,512),[[u,i.supplier.cell]])])]),l("div",le,[l("label",te,[ae,d(l("input",{id:"zip",maxlength:"8",class:"flex-input",type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>i.supplier.zip=a),placeholder:"e.g. 45212"},null,512),[[u,i.supplier.zip]])]),l("label",ie,[ne,d(l("input",{id:"email",maxlength:"128",class:"flex-input",type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>i.supplier.email=a),placeholder:"e.g. somepne@gmail.com"},null,512),[[u,i.supplier.email]])])]),l("div",pe,[l("button",{type:"submit",class:"btn-primary",disabled:p.enableSubmit},"Save",8,oe),D(s.$slots,"default",{},void 0,!0)])],32)])}var T=I(K,[["render",re],["__scopeId","data-v-7244d7a0"]]);Array.prototype.indexOfObject=function(s,e){for(let t=0,n=this.length;t<n;t++)if(this[t][s]===e)return t;return-1};const v={id:0,name:"",sales_name:"",street:"",city:"",phone:"",cell:"",zip:"",email:""},de={name:"Supplier",data(){return{suppliers:[f({},v)],selectedIndex:-1,selectedId:-1}},components:{"tw-button":J(M),"supplier-form":T},methods:{cancelForm(){const s=this;s.selectedId=-1,s.selectedIndex=-1},async deleteForm(){const s=this,e={"Content-Type":"application/json"};await h.delete(`/api/suppliers/${s.selectedId}`,{headers:e}).then(t=>{if(t.status===200){const n=s.suppliers.indexOfObject("id",s.selectedId);s.suppliers.splice(n,1),s.cancelForm()}})},supClick(s,e){const t=this;t.selectedId=e,t.selectedIndex=s},updateData(s,e){const t=this;let n=t.suppliers;const i=t.suppliers.indexOfObject("id",e);n[i]=s,t.suppliers=n,e===0&&t.suppliers.push(v),t.cancelForm()}},async mounted(){const s=this,e={"Content-Type":"application/json"};await h.get("/api/suppliers/",{headers:e}).then(t=>{const n=t.data;s.suppliers=[...n,v]})},directives:{focus:{mounted(s){setTimeout(()=>{s.focus()},100)}}}},x=s=>(V("data-v-65560596"),s=s(),w(),s),ue=x(()=>l("h1",null,"Supplier",-1)),ce=x(()=>l("div",{class:"message"}," Suplier adalah orang atau perusahaan yang menjual bahan yang akan diolah perusahaan lain menjadi produk siap jual. Umumnya suplier menjual produk dalam bentuk mentah atau bahan baku. Rumah produksi atau pabriklah yang kemudian menggunakan bahan mentah tadi untuk digunakan sebagai bagian dari proses penciptaan produk tertentu. Misalnya, supplier kelapa yang menyetorkan beberapa ton kelapa setiap bulan untuk mencukupi kebutuhan pembuatan minyak goreng kelapa yang dihasilkan si pabrik. ",-1)),me={class:"mt-4"},fe=x(()=>l("hr",null,null,-1)),_e={key:0,class:"supplier-list"},he=x(()=>l("span",{class:"flex-1"},null,-1)),xe=["disabled"],be={key:1,class:"supplier-list"},ye=["onClick"],ge={key:1,class:"supplier-item"},ve={class:"flex-none w-full md:w-2/5"},ke=["onClick"],Se={class:"flex-1 w-full text-sm mt-2 md:mt-0"};function Ve(s,e,t,n,i,p){const b=T;return o(),r("div",null,[ue,ce,l("div",me,[fe,(o(!0),r(N,null,P(i.suppliers,(a,y)=>(o(),r("div",{key:a.id},[j(B,{name:"slide-fade"},{default:C(()=>[i.selectedIndex===y&&i.selectedId===a.id?(o(),r("div",_e,[j(b,{supplierProp:a,onUpdate:p.updateData},{default:C(()=>[l("button",{type:"button",class:"btn-cancel rounded-md",onClick:e[0]||(e[0]=g=>p.cancelForm())}," Cancel "),he,l("button",{onClick:e[1]||(e[1]=g=>p.deleteForm()),type:"button",class:"btn-remove",disabled:a.id===0}," Delete ",8,xe)]),_:2},1032,["supplierProp","onUpdate"])])):(o(),r("div",be,[a.id===0?(o(),r("div",{key:0,onClick:g=>p.supClick(y,a.id),class:"span-link"}," + ",8,ye)):(o(),r("div",ge,[l("div",ve,[l("div",{onClick:g=>p.supClick(y,a.id),class:"span-link"},c(a.name),9,ke),l("div",null,"Sales: "+c(a.sales_name),1)]),l("div",Se,[l("div",null,c(a.street)+" - "+c(a.city)+", "+c(a.zip),1),l("div",null,"Telp. "+c(a.phone)+" / "+c(a.cell),1),l("div",null,c(a.email),1)])]))]))]),_:2},1024)]))),128))])])}var Fe=I(de,[["render",Ve],["__scopeId","data-v-65560596"]]);export{Fe as default};
